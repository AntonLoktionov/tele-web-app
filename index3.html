<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="ZXing for JS">

    <title>Native QR Scanner</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
	<script>
	function qrTextReceived(recievedObject) {
		document.querySelector('#comment').innerHTML = JSON.stringify(data, null, 2);
            	Telegram.WebApp.sendData(recievedObject.data);
        }
        Telegram.WebApp.onEvent('qrTextReceived', qrTextReceived);
	</script>
</head>

<body>

    <main class="wrapper" style="padding-top:2em">
      
      
      <div id="qr-reader" style="width: 600px">v11</div>
       <div id="comment" style="width: 600px">comment</div>

    </main>

    <script type="text/javascript">
	    Telegram.WebApp.expand();
      function onScanSuccess(decodedText) {
         	//console.log(`Code scanned = ${decodedText}`);
	      document.querySelector('#qr-reader').innerHTML = `Hi, ${decodedText}!`;
	      //Telegram.WebApp.sendData(data);
        	return true;
      }
      Telegram.WebApp.showScanQrPopup({text: "Сканируй код!"}, onScanSuccess);
      
    </script>

</body>

</html>
